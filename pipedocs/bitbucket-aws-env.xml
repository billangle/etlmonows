<mxfile host="draw.io" modified="2025-02-10T16:20:00.000Z" agent="Mozilla" version="20.8.10">
  <diagram id="AWSCDKMultiEnv" name="Bitbucket-Jenkins-MultiEnv-CDK">
    <mxGraphModel dx="1262" dy="720" grid="1" gridSize="10" guides="1" tooltips="1"
      connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100"
      pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Bitbucket Server -->
        <mxCell id="bitbucket" value="Bitbucket Server&#xa;(Self-Hosted Git Repo)"
          style="shape=process;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="40" y="120" width="220" height="80" as="geometry"/>
        </mxCell>

        <!-- Webhook -->
        <mxCell id="webhook" value="Webhook Trigger&#xa;(Push Event)"
          style="shape=process;rounded=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="320" y="120" width="200" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="arrow1" edge="1" parent="1" source="bitbucket" target="webhook"
          style="endArrow=classic;strokeColor=#000000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Jenkins -->
        <mxCell id="jenkins" value="Jenkins Pipeline&#xa;(Multibranch or Pipeline)"
          style="shape=process;rounded=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="580" y="120" width="240" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="arrow2" edge="1" parent="1" source="webhook" target="jenkins"
          style="endArrow=classic;strokeColor=#000000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Checkout -->
        <mxCell id="checkout" value="Checkout Source Code"
          style="shape=process;rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="40" y="300" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="arrow3" edge="1" parent="1" source="jenkins" target="checkout"
          style="endArrow=classic;strokeColor=#000000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- CDK Synth -->
        <mxCell id="cdkSynth" value="CDK Synth&#xa;(cdk synth)"
          style="shape=process;rounded=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="320" y="300" width="200" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="arrow4" edge="1" parent="1" source="checkout" target="cdkSynth"
          style="endArrow=classic;strokeColor=#000000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- CDK Deploy -->
        <mxCell id="cdkDeploy" value="CDK Deploy&#xa;(cdk deploy --require-approval never)"
          style="shape=process;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="580" y="300" width="240" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="arrow5" edge="1" parent="1" source="cdkSynth" target="cdkDeploy"
          style="endArrow=classic;strokeColor=#000000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- AWS Cloud Label -->
        <mxCell id="awsLabel" value="AWS Cloud (Multi-Account Deployment)"
          style="text;fontSize=18;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="440" width="380" height="40" as="geometry"/>
        </mxCell>

        <!-- AWS Dev -->
        <mxCell id="awsDev" value="Dev Account&#xa;CloudFormation + IAM + Services"
          style="shape=mxgraph.aws4.group;rounded=1;fillColor=#f5f5f5;strokeColor=#AFD275;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="40" y="520" width="220" height="120" as="geometry"/>
        </mxCell>

        <!-- AWS Cert -->
        <mxCell id="awsCert" value="Cert Account&#xa;CloudFormation + IAM + Services"
          style="shape=mxgraph.aws4.group;rounded=1;fillColor=#f5f5f5;strokeColor=#E3A857;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="300" y="520" width="220" height="120" as="geometry"/>
        </mxCell>

        <!-- AWS Stage -->
        <mxCell id="awsStage" value="Stage Account&#xa;CloudFormation + IAM + Services"
          style="shape=mxgraph.aws4.group;rounded=1;fillColor=#f5f5f5;strokeColor=#6FA8DC;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="560" y="520" width="220" height="120" as="geometry"/>
        </mxCell>

        <!-- AWS Prod -->
        <mxCell id="awsProd" value="Prod Account&#xa;CloudFormation + IAM + Services"
          style="shape=mxgraph.aws4.group;rounded=1;fillColor=#f5f5f5;strokeColor=#CC0000;fontSize=14;"
          vertex="1" parent="1">
          <mxGeometry x="820" y="520" width="220" height="120" as="geometry"/>
        </mxCell>

        <!-- Deploy Arrows to Environments -->
        <mxCell id="arrowDev" edge="1" parent="1" source="cdkDeploy" target="awsDev"
          style="endArrow=classic;strokeColor=#000000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrowCert" edge="1" parent="1" source="cdkDeploy" target="awsCert"
          style="endArrow=classic;strokeColor=#000000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrowStage" edge="1" parent="1" source="cdkDeploy" target="awsStage"
          style="endArrow=classic;strokeColor=#000000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrowProd" edge="1" parent="1" source="cdkDeploy" target="awsProd"
          style="endArrow=classic;strokeColor=#000000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
